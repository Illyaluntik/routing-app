import{c1 as f,dz as S,aa as w,ba as d,hn as N,aG as R,n as o,u as p,e_ as u,bB as v,v as g,V as J,I as O,a4 as b}from"./index-CzeihLq6.js";var c;let s=c=class extends f{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,a,t){if(t.layer?.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!S(e.spatialReference,t.layer.spatialReference))return void(t?.messages&&t.messages.push(new w("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const n=new d;N(e,n,t.layer.spatialReference),r[a]=n.toJSON(t)}else r[a]=e.toJSON(t);delete r[a].spatialReference}clone(){return new c({geometry:R(this.geometry),type:this.type})}};o([p({type:d}),u()],s.prototype,"geometry",void 0),o([v(["web-scene","portal-item"],"geometry")],s.prototype,"writeGeometry",null),o([p({type:["clip","mask","replace"],nonNullable:!0}),u()],s.prototype,"type",void 0),s=c=o([g("esri.layers.support.SceneModification")],s);var i;let l=i=class extends f.JSONSupportMixin(J.ofType(s)){constructor(e){super(e),this.url=null}clone(){return new i({url:this.url,items:this.items.map((e=>e.clone()))})}toJSON(e){return this.toArray().map((r=>r.toJSON(e))).filter((r=>!!r.geometry))}static fromJSON(e,r){const a=new i;for(const t of e)a.add(s.fromJSON(t,r));return a}static async fromUrl(e,r,a){const t={url:O(e),origin:"service"},n=await b(e,{responseType:"json",signal:a?.signal}),h=r.toJSON(),m=[];for(const y of n.data)m.push(s.fromJSON({...y,geometry:{...y.geometry,spatialReference:h}},t));return new i({url:e,items:m})}};o([p({type:String})],l.prototype,"url",void 0),l=i=o([g("esri.layers.support.SceneModifications")],l);export{l as n};
