import{cA as s,cB as l,cC as N,aB as m,cD as S}from"./index-DovH5zcQ.js";function b(n,r){return{...r,filterMode:n.mode}}function p(n,r){return I(n,r).next().value??null}function y(n,r,t){const e=x(n);if(e&&(s(r,e[0])||l(t,e[1])))return"";const c=Array.from(I(n,r,t)),u=T(c,r,t)?"1=1":c.map((a=>a.where||"1=1")).reduce(((a,o)=>N(a,o)),"");return u&&u!=="1=1"?u:""}function x(n){if(d(n)==="manual")return null;const r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:e}of n.filters)r[0]=Math.max(r[0],i(t)),r[1]=Math.min(r[1],f(e));return r}function*I(n,r,t){if(d(n)==="manual"){const e=n.filters.find((c=>c.id===n.activeFilterId));e&&(yield e)}else{typeof r=="object"&&(r=r.scale);for(const e of n.filters)h(e.minScale,e.maxScale,r,t)&&(yield e)}}function T(n,r,t){if(n.length===0)return!0;const e=i(n.at(0)?.minScale),c=f(n.at(-1)?.maxScale);if(l(e,r)||s(c,t))return!0;for(let u=0;u<n.length-1;u++){const a=n[u],o=n[u+1];if(l(i(o.minScale),f(a.maxScale)))return!0}return!1}function h(n,r,t,e){return n=i(n),t=i(t),r=f(r),!(!m(t,n)&&(e??t)>n)&&!S(r,t)&&(e===void 0||!m(e,n))}function d(n){return"mode"in n?n.mode:n.filterMode}function i(n){return n||Number.POSITIVE_INFINITY}function f(n){return n||0}export{y as c,b as i,p as u};
